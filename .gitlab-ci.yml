stages:
    - deployapi


deploy_dev_api:
    image: node:10
    stage: deployapi
    before_script:
      - cd api
    script:
        - echo "Deploying dev API server"
        - npm install
        - cp -R ./* /repos/lbym-app/api/
    environment:
        name: dev
        url: dev.lbym.org
    only:
        - dev

deploy_production_api:
    image: node:10
    stage: deployapi
    before_script:
        - cd api
    script:
        - echo "Deploying API server"
        - npm install
        - cp -R ./* /repos/lbym-app/api/
  environment:
        name: dev
        url: app.lbym.org
  only:
        - master
